<!DOCTYPE html>
<html>
    <%- include("base-header") %>
    <body style="margin:30px 25px;">
        <h1>Licencias</h1>
            <%- include("../utils/print") %>
            <% for (const grupo of gruposAgente) { %>
            <table class="tg tgw">
                <!-- HEADER  -->
                <tr> 
                    <th class="tg-266k" colspan="<%= (anios.length * 2) + 5 %>">
                        <h2 class="m0">Agrupamiento: <%= value(grupo._id) %></h2>
                    </th>
                </tr>
                <!-- SUBHEADER  -->
                <tr> 
                    <td class="tg-xq07" rowspan="2" style="width:10%"><h3 class="m0">Numero</h3></td>
                    <td class="tg-xq07" rowspan="2" style="width:10%"><h3 class="m0">Documento</h3></td>
                    <td class="tg-xq07" rowspan="2" style="width:15%"><h3 class="m0">Nombre</h3></td>
                    <% for (const anio of anios) { %>
                        <td class="tg-xq07" colspan="2"><h3 class="m0"><%= anio %></h3></td>    
                    <% } %>
                    <td class="tg-xq07" colspan="2"><h3 class="m0">Totales</h3></td>
                </tr>
                <tr> 
                    <% for (const anio of anios) { %>
                        <td class="tg-xq07"><h3 class="m0">Tomados</h3></td>
                        <td class="tg-xq07"><h3 class="m0">Resto</h3></td>
                    <% } %>
                        <td class="tg-xq07"><h3 class="m0">Tomados</h3></td>
                        <td class="tg-xq07"><h3 class="m0">Resto</h3></td>
                </tr>
                <!-- DATA  -->
                <% for (const agente of grupo.agentes) { %>
                <tr>
                    <td class="tg-0pky"><%= value(agente.numero) %></td>
                    <td class="tg-0pky"><%= value(agente.documento) %></td>
                    <td class="tg-0pky"><%= value(agente.nombre) %>. DNI <%= value(agente.apellido) %></td>
                    <% let licenciasMap = mapLicenciasPorAnio(anios, agente.ausentismo) %>
                    <% for (const aus of licenciasMap) { %>
                        <td class="tg-0pky"><%= value(aus.tomados) %></td>
                        <td class="tg-0pky"><%= value(aus.resto) %></td>    
                    <% } %>
                </tr>
                <% } %> 
            </table>
            <br>
        <% } %>

    </body>
</html>